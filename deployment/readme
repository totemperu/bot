Deployment behavior is implemented by scripts under `deployment/`. This file
documents invocation, runtime topology, and operational boundaries.

Deployment is driven by "deployment/deploy.sh". The script installs required
tooling, builds the frontend, and installs systemd services. It may be run with
or without elevated privileges, depending on the target environment. Supplying
`.env.production` disables interactive prompting.

```bash
sudo deployment/deploy.sh .env.production
```

In development, services run directly. In production, external traffic enters
through Nginx on port 80 and is proxied to internal services. Nginx is
production-only.

+-----------+------------+-------------+
| Component | Port (dev) | Port (prod) |
+-----------+------------+-------------+
| Frontend  | 5173       | 3000        |
| Backend   | 3000       | 3001        |
| Notifier  | 3002       | 3002        |
| Nginx     | n/a        | 80          |
+-----------+------------+-------------+

Deployed services are managed via systemd and are named `totem-*`.

Operational commands:

systemctl status totem-*
journalctl -u totem-backend -f
systemctl restart totem-*

Deployment is configuration-aware. If `.env.production` is present, re-running
`deploy.sh` will not reconfigure services. Removing the file forces
reconfiguration.

```bash
rm .env.production
sudo bash deployment/deploy.sh
```

Teardown is handled by `deployment/cleanup.sh`.

## Mode / effect

default             preview and confirmation
--services-only     remove systemd services only
--keep-data         remove everything except data
--force             run without confirmation

Invocation:

deployment/cleanup.sh
deployment/cleanup.sh --services-only
deployment/cleanup.sh --keep-data
deployment/cleanup.sh --force
